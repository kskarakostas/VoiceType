<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VoiceType Settings</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <span class="logo-icon">üéôÔ∏è</span>
        <div class="logo-text">
          <h1>VoiceType</h1>
          <span class="tagline">AI Speech to Text</span>
        </div>
      </div>
      <div class="status-indicator" id="status-indicator">
        <span class="status-dot"></span>
        <span class="status-text">Not configured</span>
      </div>
    </header>

    <!-- Tabs -->
    <div class="tabs">
      <button class="tab active" data-tab="settings">‚öôÔ∏è Settings</button>
      <button class="tab" data-tab="modes">üéØ Modes</button>
      <button class="tab" data-tab="usage">üìä Usage</button>
    </div>

    <!-- Tab: Settings -->
    <div class="tab-content active" id="tab-settings">
      <section class="section">
        <div class="form-group">
          <label>Provider</label>
          <div class="provider-tabs">
            <button class="provider-tab active" data-provider="openai">OpenAI</button>
            <button class="provider-tab" data-provider="gemini">Gemini</button>
          </div>
        </div>
        
        <!-- OpenAI Settings -->
        <div class="provider-settings" id="openai-settings">
          <div class="form-group">
            <label for="api-key">API Key</label>
            <div class="input-wrapper">
              <input type="password" id="api-key" placeholder="sk-..." autocomplete="off">
              <button type="button" class="btn-clear" id="clear-key" title="Clear">‚úï</button>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group compact">
              <label for="model">Model</label>
              <select id="model">
                <option value="gpt-4o-transcribe">gpt-4o</option>
                <option value="gpt-4o-mini-transcribe">gpt-4o-mini</option>
              </select>
            </div>
            <div class="form-group compact">
              <label for="max-time">Max Rec</label>
              <select id="max-time">
                <option value="30">30s</option>
                <option value="60" selected>1m</option>
                <option value="120">2m</option>
                <option value="180">3m</option>
                <option value="300">5m</option>
              </select>
            </div>
          </div>
        </div>
        
        <!-- Gemini Settings -->
        <div class="provider-settings" id="gemini-settings" style="display: none;">
          <div class="form-group">
            <label for="gemini-key">API Key</label>
            <div class="input-wrapper">
              <input type="password" id="gemini-key" placeholder="AIza..." autocomplete="off">
              <button type="button" class="btn-clear" id="clear-gemini-key" title="Clear">‚úï</button>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group compact">
              <label for="gemini-model">Model</label>
              <select id="gemini-model">
                <option value="gemini-3-flash-preview">3 Flash</option>
                <option value="gemini-2.5-flash">2.5 Flash</option>
              </select>
            </div>
            <div class="form-group compact">
              <label for="max-time-gemini">Max Rec</label>
              <select id="max-time-gemini" class="max-time-select">
                <option value="30">30s</option>
                <option value="60" selected>1m</option>
                <option value="120">2m</option>
                <option value="180">3m</option>
                <option value="300">5m</option>
              </select>
            </div>
          </div>
        </div>
        
        <p class="help-text warning" id="api-key-warning" style="display: none;">
          ‚ö†Ô∏è Set spending limits on your account
        </p>
      </section>

      <div class="shortcut-row">
        <span>‚å®Ô∏è <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>Space</kbd></span>
        <a href="#" id="shortcuts-link">edit</a>
      </div>

      <div class="form-group compact" style="margin-top: 8px;">
        <label for="pill-gap">Pill Distance from Field</label>
        <div class="pill-gap-control">
          <input type="range" id="pill-gap" min="0" max="50" value="8" step="2">
          <span id="pill-gap-value">8px</span>
        </div>
      </div>

      <button class="btn btn-primary btn-block" id="save-settings">üíæ Save</button>
      
      <button class="btn btn-recording btn-block" id="start-recording">üé§ Start Recording</button>
      <p class="help-text" style="text-align: center; margin-top: 4px;">Click then focus on a text field</p>
    </div>

    <!-- Tab: Modes -->
    <div class="tab-content" id="tab-modes">
      <section class="section">
        <h2 class="section-title">
          <span class="section-icon">‚ö°</span>
          Transcription Modes
          <button class="btn-icon" id="add-mode" title="Add custom mode">‚ûï</button>
        </h2>
        <div class="modes-list" id="modes-list">
          <!-- Modes will be populated by JavaScript -->
        </div>
      </section>

      <!-- Current Mode Editor -->
      <section class="section" id="mode-editor" style="display: none;">
        <h2 class="section-title">
          <span class="section-icon">‚úèÔ∏è</span>
          <span id="editor-title">Edit Mode</span>
        </h2>
        <div class="form-group">
          <label for="mode-name">Mode Name</label>
          <input type="text" id="mode-name" placeholder="e.g., My Custom Mode">
        </div>
        <div class="form-group">
          <label for="mode-icon">Icon (emoji)</label>
          <input type="text" id="mode-icon" placeholder="e.g., üéØ" maxlength="2">
        </div>
        <div class="form-group">
          <label for="mode-prompt">Prompt</label>
          <textarea id="mode-prompt" rows="4" placeholder="Instructions for how to process the transcription..."></textarea>
          <p class="help-text">This prompt guides how OpenAI processes your speech.</p>
        </div>
        <div class="button-group">
          <button class="btn btn-secondary" id="cancel-edit">Cancel</button>
          <button class="btn btn-danger" id="delete-mode" style="display: none;">Delete</button>
          <button class="btn btn-primary" id="save-mode">Save Mode</button>
        </div>
      </section>
    </div>

    <!-- Tab: Usage -->
    <div class="tab-content" id="tab-usage">
      <section class="section">
        <div class="stats-compact">
          <div class="stats-row-header">
            <span></span>
            <span>Sessions</span>
            <span>Audio</span>
            <span>Cost</span>
          </div>
          <div class="stats-row-data">
            <span class="stats-period">Today</span>
            <span id="today-sessions">0</span>
            <span id="today-time">0:00</span>
            <span id="today-cost">$0.00</span>
          </div>
          <div class="stats-row-data">
            <span class="stats-period">7 Days</span>
            <span id="week-sessions">0</span>
            <span id="week-time">0:00</span>
            <span id="week-cost">$0.00</span>
          </div>
          <div class="stats-row-data highlight">
            <span class="stats-period">All Time</span>
            <span id="total-sessions">0</span>
            <span id="total-time">0:00</span>
            <span id="total-cost">$0.00</span>
          </div>
        </div>
        
        <div class="provider-breakdown">
          <div class="provider-stat">
            <span class="provider-name">ü§ñ OpenAI</span>
            <span class="provider-data"><span id="openai-sessions">0</span> ‚Ä¢ <span id="openai-time">0:00</span></span>
            <span class="provider-cost" id="openai-cost">$0.00</span>
          </div>
          <div class="provider-stat">
            <span class="provider-name">‚ú® Gemini</span>
            <span class="provider-data"><span id="gemini-sessions">0</span> ‚Ä¢ <span id="gemini-time">0:00</span></span>
            <span class="provider-cost" id="gemini-cost">$0.00</span>
          </div>
        </div>
        
        <div class="usage-actions">
          <button class="btn-text" id="refresh-stats">üîÑ Refresh</button>
          <button class="btn-text danger" id="clear-stats">üóëÔ∏è Clear</button>
        </div>
      </section>
    </div>

    <!-- Footer -->
    <footer class="footer">
      <span class="version-text">v1.7.6</span>
      <span class="credits-text">by K. S. Karakostas</span>
    </footer>
  </div>

  <!-- Toast notification -->
  <div class="toast" id="toast"></div>

  <script src="popup.js"></script>
</body>
</html>
